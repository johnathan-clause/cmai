local PRoles = {}

PRoles["SafeLane"] = {
	"npc_dota_hero_nevermore",
	"npc_dota_hero_sven",
	"npc_dota_hero_chaos_knight",
	"npc_dota_hero_bloodseeker",
	"npc_dota_hero_skeleton_king",
	"npc_dota_hero_antimage",
	"npc_dota_hero_juggernaut",
	"npc_dota_hero_terrorblade",
	"npc_dota_hero_phantom_assassin",
	"npc_dota_hero_luna",
	"npc_dota_hero_phantom_lancer",
	"npc_dota_hero_life_stealer",
	"npc_dota_hero_naga_siren",
	"npc_dota_hero_meepo",
	"npc_dota_hero_medusa",
	"npc_dota_hero_ursa",
	"npc_dota_hero_faceless_void",
	"npc_dota_hero_slark",
	"npc_dota_hero_spectre",
	"npc_dota_hero_razor",
	"npc_dota_hero_alchemist",
	"npc_dota_hero_sniper",
	"npc_dota_hero_templar_assassin",
	"npc_dota_hero_troll_warlord",
	"npc_dota_hero_zuus",
}

PRoles["MidLane"] = {
	"npc_dota_hero_nevermore",
	"npc_dota_hero_sniper",
	"npc_dota_hero_viper",
	"npc_dota_hero_templar_assassin",
	"npc_dota_hero_huskar",
	"npc_dota_hero_storm_spirit",
	"npc_dota_hero_obsidian_destroyer",
	"npc_dota_hero_riki",
	"npc_dota_hero_lina",
	"npc_dota_hero_queenofpain",
	"npc_dota_hero_death_prophet",
	"npc_dota_hero_pugna",
	"npc_dota_hero_meepo",
	"npc_dota_hero_arc_warden",
	"npc_dota_hero_batrider",
	"npc_dota_hero_tiny",
	"npc_dota_hero_necrolyte",
	"npc_dota_hero_broodmother",
	"npc_dota_hero_visage",
	"npc_dota_hero_razor",
	"npc_dota_hero_invoker",
	"npc_dota_hero_kunkka",
	"npc_dota_hero_pudge",
	"npc_dota_hero_zuus",
}

PRoles["OffLane"] = {
	"npc_dota_hero_chaos_knight",
	"npc_dota_hero_bloodseeker",
	"npc_dota_hero_viper",
	"npc_dota_hero_bristleback",
	"npc_dota_hero_night_stalker",
	"npc_dota_hero_razor",
	"npc_dota_hero_axe",
	"npc_dota_hero_legion_commander",
	"npc_dota_hero_slardar",
	"npc_dota_hero_tidehunter",
	"npc_dota_hero_dragon_knight",
	"npc_dota_hero_death_prophet",
	"npc_dota_hero_enigma",
	"npc_dota_hero_pudge",
	"npc_dota_hero_brewmaster",
	"npc_dota_hero_mars",
	"npc_dota_hero_ogre_magi",
	"npc_dota_hero_batrider",
	"npc_dota_hero_sand_king",
	"npc_dota_hero_centaur",
	"npc_dota_hero_necrolyte",
	"npc_dota_hero_broodmother",
	"npc_dota_hero_lycan",
	"npc_dota_hero_furion",
	"npc_dota_hero_visage",
	"npc_dota_hero_bounty_hunter",
	"npc_dota_hero_beastmaster",
	"npc_dota_hero_skeleton_king",
	"npc_dota_hero_kunkka",
	"npc_dota_hero_shredder",
}

PRoles["SoftSupport"] = {
	"npc_dota_hero_skywrath_mage",
	"npc_dota_hero_silencer",
	"npc_dota_hero_shadow_shaman",
	"npc_dota_hero_gyrocopter",
	"npc_dota_hero_grimstroke",
	"npc_dota_hero_venomancer",
	"npc_dota_hero_earthshaker",
	"npc_dota_hero_treant",
	"npc_dota_hero_witch_doctor",
	"npc_dota_hero_nyx_assassin",
	"npc_dota_hero_shadow_demon",
	"npc_dota_hero_oracle",
	"npc_dota_hero_tusk",
	"npc_dota_hero_winter_wyvern",
}

PRoles["HardSupport"] = {
	"npc_dota_hero_skywrath_mage",
	"npc_dota_hero_warlock",
	"npc_dota_hero_silencer",
	"npc_dota_hero_shadow_shaman",
	"npc_dota_hero_gyrocopter",
	"npc_dota_hero_grimstroke",
	"npc_dota_hero_jakiro",
	"npc_dota_hero_treant",
	"npc_dota_hero_abaddon",
	"npc_dota_hero_lich",
	"npc_dota_hero_omniknight",
	"npc_dota_hero_bane",
	"npc_dota_hero_crystal_maiden",
	"npc_dota_hero_ancient_apparition",
	"npc_dota_hero_lion",
	"npc_dota_hero_undying",
	"npc_dota_hero_witch_doctor",
	"npc_dota_hero_shadow_demon",
	"npc_dota_hero_oracle",
	"npc_dota_hero_winter_wyvern",
}

-------------------------------------------------------------------------------------------

PRoles["invisHeroes"] = {
	["npc_dota_hero_templar_assassin"] = 1,
	["npc_dota_hero_clinkz"] = 1,
	["npc_dota_hero_mirana"] = 1,
	["npc_dota_hero_riki"] = 1,
	["npc_dota_hero_nyx_assassin"] = 1,
	["npc_dota_hero_bounty_hunter"] = 1,
	["npc_dota_hero_invoker"] = 1,
	["npc_dota_hero_sand_king"] = 1,
	["npc_dota_hero_treant"] = 1,
	["npc_dota_hero_broodmother"] = 1,
	["npc_dota_hero_weaver"] = 1
} 

PRoles["SummonHeroes"] = {
	"npc_dota_hero_chaos_knight",
	"npc_dota_hero_naga_siren",
	"npc_dota_hero_phantom_lancer",
	"npc_dota_hero_terrorblade",
	"npc_dota_hero_broodmother",
	"npc_dota_hero_meepo",
	"npc_dota_hero_enigma",
	"npc_dota_hero_lycan",
	"npc_dota_hero_visage",
}

function PRoles.GetPRole(bot, hero)
	for i = 1, #PRoles["SafeLane"] do
		if PRoles['SafeLane'][i] == hero then
			if bot:GetTeam() == TEAM_RADIANT and bot:GetAssignedLane() == LANE_BOT then
				return "SafeLane"
			elseif bot:GetTeam() == TEAM_DIRE and bot:GetAssignedLane() == LANE_TOP then
				return "SafeLane"
			end
		end	
	end
	
	for i = 1, #PRoles["MidLane"] do
		if PRoles['MidLane'][i] == hero and bot:GetAssignedLane() == LANE_MID then
			return "MidLane"
		end	
	end
	
	for i = 1, #PRoles["OffLane"] do
		if PRoles['OffLane'][i] == hero then
			if bot:GetTeam() == TEAM_RADIANT and bot:GetAssignedLane() == LANE_TOP then
				return "OffLane"
			elseif bot:GetTeam() == TEAM_DIRE and bot:GetAssignedLane() == LANE_BOT then
				return "OffLane"
			end
		end
	end
	
	for i = 1, #PRoles["SoftSupport"] do
		if PRoles['SoftSupport'][i] == hero then
			if bot:GetTeam() == TEAM_RADIANT and bot:GetAssignedLane() == LANE_TOP then
				return "SoftSupport"
			elseif bot:GetTeam() == TEAM_DIRE and bot:GetAssignedLane() == LANE_BOT then
				return "SoftSupport"
			end
		end
	end
	
	for i = 1, #PRoles['HardSupport'] do
		if PRoles['HardSupport'][i] == hero then
			if bot:GetTeam() == TEAM_RADIANT and bot:GetAssignedLane() == LANE_BOT then
				return "HardSupport"
			elseif bot:GetTeam() == TEAM_DIRE and bot:GetAssignedLane() == LANE_TOP then
				return "HardSupport"
			end
		end
	end
end

function PRoles.GetAOEItem()
	local EnemyPlayers = GetTeamPlayers(GetOpposingTeam())
	
	for v, Hero in pairs(EnemyPlayers) do
		local EnemyName = GetSelectedHeroName(Hero)
		
		for x, SummonHero in pairs(PRoles["SummonHeroes"]) do
			if EnemyName == SummonHero then
				return "item_crimson_guard"
			end
		end
	end
	
	return "item_pipe"
end

PRoles['invisEnemyExist'] = false;
local globalEnemyCheck = false;
local lastCheck = -90;

function PRoles.UpdateInvisEnemyStatus(bot)
	if globalEnemyCheck == false then
		local players = GetTeamPlayers(GetOpposingTeam());
		for i=1,#players do
			if PRoles["invisHeroes"][GetSelectedHeroName(players[i])] == 1 
			then
				PRoles['invisEnemyExist'] = true;
				break;
			end
		end
		globalEnemyCheck = true;	
	elseif globalEnemyCheck == true and DotaTime() > 10*60 and DotaTime() > lastCheck + 3.0 then
		local enemies = bot:GetNearbyHeroes(1600, true, BOT_MODE_NONE);
		if #enemies > 0 then
			for i=1,#enemies
			do
				if enemies[i] ~= nil and enemies[i]:IsNull() == false and enemies[i]:CanBeSeen() == true then
					local SASlot = enemies[i]:FindItemSlot("item_shadow_amulet");
					local GCSlot = enemies[i]:FindItemSlot("item_glimmer_cape");
					local ISSlot = enemies[i]:FindItemSlot("item_invis_sword");
					local SESlot = enemies[i]:FindItemSlot("item_silver_edge");
					if  SASlot >= 0 or GCSlot >= 0 or ISSlot >= 0 or SESlot >= 0 
					then
						PRoles['invisEnemyExist'] = true;
						break;
					end	
				end
			end
		end
		lastCheck = DotaTime();
	end	
end

function PRoles.IsTheLowestLevel(bot)
	local lowestLevel = 31;
	local lowestID = -1;
	local players = GetTeamPlayers(GetTeam());
	for i=1,#players do
		if GetHeroLevel(players[i]) < lowestLevel then
			lowestLevel = GetHeroLevel(players[i]);
			lowestID = players[i];
		end
	end
	return bot:GetPlayerID() == lowestID;
end

PRoles["lastbbtime"] = -90

return PRoles